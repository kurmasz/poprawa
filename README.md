# Poprawa

Poprawa (Polish for "improvement") is a Ruby library for generating progress reports from 
Excel-based gradebooks. It is designed for instructors who use mastery-based grading (or other
forms of alternative grading) and find that their LMS's gradebook doesn't meet their needs.
(Yes, I'm looking at you, Blackboard.)

In theory, you can use this code "out of the box" -- if you don't mind doing things the same way 
we do. However, rather than expecting you to conform your practices to our code, our goal is to
document this code well enough that you can customize it to conform to your preferred workflow.

## Basic "Out-of-the-Box" Workflow

This is what your high-level workflow would look like if you use our code without modifications:

1. Edit a Ruby config file (similar to [this one](demo/demo_workbook_builder_config.rb)) so that it describes the desired gradebook structure (e.g., assignment categories).
2. Obtain/prepare a `.csv` file (similar to [this one](demo/demo_student_roster.csv))containing student names and other information.
3. Run the `workbook_builder` script which uses the config and `.csv` files as input then generates an empty `.xlsx` workbook.
   * `workbook_builder demo_workbook_builder_config.rb` (The config file specifies the roster file.)
4. Enter marks in the grade workbook.
5. Periodically run the `gh_progress_report` script to generate a progress report for each student in markdown format.

We use GitHub to make the progress reports available to the students. Specifically, 
1. Students use [GitHub Classroom](https://classroom.github.com/) to create a precisely-named GitHub repository to which the instructor has write access.
2. Instructors add each student's GitHub account name to the gradebook's "info" worksheet.  
   * This is a manual process because our courses are typically 25 to 40 students. (Not big enough to need automation.)
3. The script `gh-progress_report` writes each progress report to the `README.md` file in the student's GitHub repository, 
   then pushes the changes. 
   * Because the report is written to `README.md`, students can view their report by simply visiting the web site for their GitHub page.
   * We configure GitHub Classroom to create private repositories, so the reports can only be seen by the student. 

The current version of `gh_progress_report` assumes that each GitHub repository has a name that is automatically generated by GitHub Classroom
(this is why we store the student's GitHub account name in the workbook instead of the specific repository name).  We would certainly consider adding the ability to store the repository name instead should there be interest.

The current version only supports report dissemination through GitHub.  However, if you wanted, you could simply make a hard copy of each report and pass them out in class. (There are tools that will convert markdown to Postscript, html, or pdf.) It should also be straightforward to add code to email each student his or her progress report (either as markdown, or converted into a different format) --- provided there is a email library that will work with your institution's email server.

## Workbook Format

Poprawa expects marks to be stored in an Excel workbook (.xlsx) formatted as follows:
* An "info" worksheet containing two header rows followed by one row for each student
  * Each student row contains information such as first name, last name, username, section, GitHub account name, etc.
* One or more worksheets to contain marks (one worksheet per category --- homework, projects, quizzes, etc.)
* A worksheet for attendance
* The first several columns of each "category" and attendance worksheet are references to the info worksheet
  * (Clearly, the names are needed on each worksheet. We have found that other information is also often helpful.  Users can hide info columns that are not needed on a worksheet-by-worksheet basis.)
* Each worksheet has _two_ header rows:  A "long", meaningful description, and a "short", abbreviated description.  The "short" description is the Ruby symbol that is used to reference the item.

[Here](demo/demo_grades.xlsx) is an example workbook.

The `workbook_builder` script will generate a correctly-formatted workbook from a Ruby config file and a `.csv` file containing student information.

Each mark in a category or assignment worksheet can have up to three components: 
* The mark itself
* The number of late days
* A comment

The mark and late days are separated by a pipe (`|`) and the late days and comment are separated by a semi-colon.  For example:

`p | 4 ; almost correct, but some confusion in part 2`

The mark can be any string (except that it can't contain the pipe or semi-colon). The progress report simply prints the mark as written.
The only time the format of the mark matters is if you are using the script to calculate an overall grade.

## Notes to Developers

Some automated tests need to push generated reports to a GitHub repo. We didn't want those
test reports pushed to this repo, because it would severely clutter the repo's commit logs.
So, each user that wants to run tests that push to GitHub must 
1. Choose/Create a separate repo to which she has write permissions
2. Place that repo in `spec/output/poprawa-github-tests` 
   * You can specify the desired directory name when cloning a repo:  `git clone repo_url poprawa-github-tests`